{
 "bar consume": "CQlyZXR1cm4gSGFuZGxlUGFyZW50UnVuKGUsIGZ1bmMocnVuIHN0cmluZywgcmVxICpKb2JSZXF1ZXN0KSBlcnJvciB7CgkJCWlmIHJlcS5TdGF0dXMgPT0gSm9iU3RhdHVzX1BFTkRJTkcgJiYgcmVxLklzQmFyIHsKCQkJCWxvZy5JbmZvKGN0eCwgImJhciBjbGFpbWluZyBqb2IiLCBqLktTKCJydW4iLCBydW4pKQoJCQkJXywgZXJyIDo9IFNpZ25hbFBhcmVudENsYWltSm9iKGN0eCwgcy5SZXBsYXksIHJ1biwgJkNsYWltSm9ie0J5OiAiYmFyIn0sICIiKQoJCQkJcmV0dXJuIGVycgoJCQl9IGVsc2UgaWYgcmVxLlN0YXR1cyA9PSBKb2JTdGF0dXNfQ0xBSU1FRCAmJiByZXEuQ2xhaW1lZEJ5ID09ICJiYXIiIHsKCQkJCWxvZy5JbmZvKGN0eCwgImJhciBleGVjdXRpbmcgam9iISEiLCBqLktTKCJydW4iLCBydW4pKQoJCQkJdGltZS5TbGVlcCh0aW1lLlNlY29uZCkKCQkJCV8sIGVyciA6PSBTaWduYWxQYXJlbnRDb21wbGV0ZUpvYihjdHgsIHMuUmVwbGF5LCBydW4sICZDb21wbGV0ZUpvYnt9LCAiIikKCQkJCXJldHVybiBlcnIKCQkJfQoJCQlyZXR1cm4gbmlsCgkJfSk=",
 "foo consume": "CQlyZXR1cm4gSGFuZGxlUGFyZW50UnVuKGUsIGZ1bmMocnVuIHN0cmluZywgcmVxICpKb2JSZXF1ZXN0KSBlcnJvciB7CgkJCWlmIHJlcS5TdGF0dXMgPT0gSm9iU3RhdHVzX1BFTkRJTkcgJiYgcmVxLklzRm9vIHsKCQkJCWxvZy5JbmZvKGN0eCwgImZvbyBjbGFpbWluZyBqb2IiLCBqLktTKCJydW4iLCBydW4pKQoJCQkJXywgZXJyIDo9IFNpZ25hbFBhcmVudENsYWltSm9iKGN0eCwgcy5SZXBsYXksIHJ1biwgJkNsYWltSm9ie0J5OiAiZm9vIn0sICIiKQoJCQkJcmV0dXJuIGVycgoJCQl9IGVsc2UgaWYgcmVxLlN0YXR1cyA9PSBKb2JTdGF0dXNfQ0xBSU1FRCAmJiByZXEuQ2xhaW1lZEJ5ID09ICJmb28iIHsKCQkJCWxvZy5JbmZvKGN0eCwgImZvbyBleGVjdXRpbmcgam9iISEiLCBqLktTKCJydW4iLCBydW4pKQoJCQkJXywgZXJyIDo9IFNpZ25hbFBhcmVudENvbXBsZXRlSm9iKGN0eCwgcy5SZXBsYXksIHJ1biwgJkNvbXBsZXRlSm9ie30sICIiKQoJCQkJcmV0dXJuIGVycgoJCQl9IGVsc2UgaWYgcmVxLlN0YXR1cyA9PSBKb2JTdGF0dXNfQ09NUExFVEVEIHsKCQkJCWxvZy5JbmZvKGN0eCwgImpvYiBjb21wbGV0ZSIsIGouS1MoInJ1biIsIHJ1bikpCgkJCX0gZWxzZSBpZiByZXEuU3RhdHVzID09IEpvYlN0YXR1c19GQUlMRUQgewoJCQkJbG9nLkluZm8oY3R4LCAiam9iIGZhaWxlZCIsIGouS1MoInJ1biIsIHJ1bikpCgkJCX0KCQkJcmV0dXJuIG5pbAoJCX0p",
 "workflow": "CXN3aXRjaCByZXEuU3RhdHVzIHsKCWNhc2UgSm9iU3RhdHVzX1BFTkRJTkc6CgkJY2xhaW0sIG9rIDo9IGZsb3cuQXdhaXRDbGFpbUpvYih0aW1lLkhvdXIpCgkJaWYgIW9rIHsKCQkJcmVxLlN0YXR1cyA9IEpvYlN0YXR1c19GQUlMRUQKCQkJcmVxLkZhaWxSZWFzb24gPSAiY2xhaW0gdGltZW91dCIKCQkJZmxvdy5SZXN0YXJ0KHJlcSkKCQl9CgkJcmVxLlN0YXR1cyA9IEpvYlN0YXR1c19DTEFJTUVECgkJcmVxLkNsYWltZWRCeSA9IGNsYWltLkJ5CgkJZmxvdy5SZXN0YXJ0KHJlcSkKCWNhc2UgSm9iU3RhdHVzX0NMQUlNRUQ6CgkJY29tcGxldGUsIG9rIDo9IGZsb3cuQXdhaXRDb21wbGV0ZUpvYih0aW1lLkhvdXIpCgkJaWYgIW9rIHsKCQkJcmVxLlN0YXR1cyA9IEpvYlN0YXR1c19GQUlMRUQKCQkJcmVxLkZhaWxSZWFzb24gPSAiY29tcGxldGUgdGltZW91dCIKCQkJZmxvdy5SZXN0YXJ0KHJlcSkKCQl9IGVsc2UgaWYgY29tcGxldGUuRmFpbCB7CgkJCXJlcS5TdGF0dXMgPSBKb2JTdGF0dXNfRkFJTEVECgkJCXJlcS5GYWlsUmVhc29uID0gImNvbXBsZXRlIGZhaWxlZCIKCQkJZmxvdy5SZXN0YXJ0KHJlcSkKCQl9CgkJcmVxLlN0YXR1cyA9IEpvYlN0YXR1c19DT01QTEVURUQKCQlmbG93LlJlc3RhcnQocmVxKQoJY2FzZSBKb2JTdGF0dXNfRkFJTEVELCBKb2JTdGF0dXNfQ09NUExFVEVEOgoJCS8vIFdlIGFyZSBkb25lLCBqdXN0IHJldHVybgoJCXJldHVybgoJZGVmYXVsdDoKCQlyZXEuU3RhdHVzID0gSm9iU3RhdHVzX0ZBSUxFRAoJCXJlcS5GYWlsUmVhc29uID0gImludmFsaWQgc3RhdHVzIgoJCWZsb3cuUmVzdGFydChyZXEpCgl9"
}
